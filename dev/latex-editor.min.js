function refreshMathJax(){mathrefreshing||(mathrefreshing=!0,setTimeout(()=>{MathJax.typesetPromise(),mathrefreshing=!1},100))}function getCursorPos(t){if("selectionStart"in t&&document.activeElement==t)return{start:t.selectionStart,end:t.selectionEnd};if(t.createTextRange){var e=document.selection.createRange();if(e.parentElement()===t){var n=t.createTextRange();n.moveToBookmark(e.getBookmark());for(var s=0;n.compareEndPoints("EndToStart",n)>0;n.moveEnd("character",-1))s++;n.setEndPoint("StartToStart",t.createTextRange());for(var i={start:0,end:s};n.compareEndPoints("EndToStart",n)>0;n.moveEnd("character",-1))i.start++,i.end++;return i}}return-1}function downloadTextAsFile(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}const toc=[];class markdownTreatment{constructor(){showdown.setFlavor("github");const t={extensions:[showdownToc({toc:toc})],sanitize:!1,tables:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,openLinksInNewWindow:!0,underline:!0,omitExtraWLInCodeBlocks:!0,customizedHeaderId:!0,prefixHeaderId:"doc-",parseImgDimensions:!0,simplifiedAutoLink:!0,strikethrough:!0,tablesHeaderId:!0};this.converter=new showdown.Converter(t)}makeHtml(t){return this.converter.makeHtml(t)}prepareFullHtml(t,e){let n="<!doctype html>";return n+="<html lang=en>",n+="<head>",n+='<meta name="viewport" content="width=device-width, initial-scale=1.0">',n+="<title>"+t+"</title>",n+='<link rel="icon" type="image/png" href="favicon.png">',n+='<link rel="stylesheet" href="'+window.location.origin+'css/latex-editor.min.css">',n+='<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">',n+='<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg==" crossorigin="anonymous" />',n+='<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>',n+="</head>",n+="<body>",n+='<div class="markdown-body">',n+=this.makeHtml(e).replaceAll("\n",""),n+="</div>",n+="<script>MathJax = {tex: {inlineMath: [['$', '$'],['\\(', '\\)']]}};setTimeout(()=>{MathJax.typesetPromise();setTimeout(()=>{window.print();},100);},100);</script>",n+='<script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>',n+="</body>",n+="</html>",n}}MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}};let mathrefreshing=!1;(function(){var t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",t.async=!0,document.head.appendChild(t)})();const toolbox={new:{html:"<i class='far fa-file'></i>",func:function(t){confirm("This operation will remove the present text.\nAre you sure you want to proceed?\n\nPress Ok proceed.")&&(t.text="")}},openText:{html:"<i class='far fa-folder-open'></i>",func:function(t){confirm("This operation will remove the present text.\nAre you sure you want to proceed?\n\nPress Ok proceed.")&&(document.getElementById("md-file").value="",document.getElementById("md-file").click())}},saveText:{html:"<i class='far fa-save'></i>",func:function(t){downloadTextAsFile((new Date).toISOString()+"-notes.md",t.text)}},saveHtml:{html:"<i class='fas fa-save'></i>",func:function(t){downloadTextAsFile((new Date).toISOString()+"-notes.html",t.md.prepareFullHtml("Notes prepared at https://oct.skgadi.com/latex-editor.min.html",t.text))}},print:{html:"<i class='fas fa-print'></i>",func:function(t){const e=t.md.prepareFullHtml("Notes prepared at https://oct.skgadi.com/latex-editor.min.html",t.text),n=open();n.document.write(e),n.document.close()}},gap0:{html:"&nbsp;&nbsp;",func:function(){}},h1:{html:"H1",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\n# "+t.text.slice(e,n)+"\n"+t.text.slice(n),{sel:{start:e+1+2,end:n+1+2}}}},h2:{html:"H2",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\n## "+t.text.slice(e,n)+"\n"+t.text.slice(n),{sel:{start:e+1+3,end:n+1+3}}}},h3:{html:"H3",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\n### "+t.text.slice(e,n)+"\n"+t.text.slice(n),{sel:{start:e+1+4,end:n+1+4}}}},h4:{html:"H4",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\n#### "+t.text.slice(e,n)+"\n"+t.text.slice(n),{sel:{start:e+1+5,end:n+1+5}}}},h5:{html:"H5",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\n##### "+t.text.slice(e,n)+"\n"+t.text.slice(n),{sel:{start:e+1+6,end:n+1+6}}}},h6:{html:"H6",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\n###### "+t.text.slice(e,n)+"\n"+t.text.slice(n),{sel:{start:e+1+7,end:n+1+7}}}},b:{html:"<b>B</b>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"**"+t.text.slice(e,n)+"**"+t.text.slice(n),{sel:{start:e+2,end:n+2}}}},i:{html:"<i>I</i>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"*"+t.text.slice(e,n)+"*"+t.text.slice(n),{sel:{start:e+1,end:n+1}}}},u:{html:"<u>U</u>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"__"+t.text.slice(e,n)+"__"+t.text.slice(n),{sel:{start:e+2,end:n+2}}}},s:{html:"<strike>S</strike>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"~~"+t.text.slice(e,n)+"~~"+t.text.slice(n),{sel:{start:e+2,end:n+2}}}},table:{html:"<i class='fas fa-table'></i>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\n|.|.|.|\n|:---|---|---:|\n|.|.|.|\n"+t.text.slice(n),{sel:{start:e+2,end:n+2}}}},anchor:{html:"<i class='fas fa-link'></i>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"["+t.text.slice(e,n)+"](https://skgadi.com)"+t.text.slice(n),{sel:{start:n+3,end:n+21}}}},img:{html:"<i class='fas fa-image'></i>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"!["+t.text.slice(e,n)+"](https://skgadi.com/images/my-logo.png =*x100)"+t.text.slice(n),{sel:{start:n+4,end:n+48}}}},youtube:{html:"<i class='fab fa-youtube'></i>",func:function(t,e,n){return t.text=t.text.slice(0,e)+"[!["+t.text.slice(e,n)+"](https://img.youtube.com/vi/_S3YDKsFmpk/0.jpg =*x200)](https://www.youtube.com/watch?v=_S3YDKsFmpk)"+t.text.slice(n),{sel:{start:n+32,end:n+43}}}},gap1:{html:"&nbsp;&nbsp;",func:function(){}},inline:{html:"&nbsp;$&nbsp;",func:function(t,e,n){return t.text=t.text.slice(0,e)+"$"+t.text.slice(e,n)+"$"+t.text.slice(n),{sel:{start:e+1,end:n+1}}}},disp:{html:"$$",func:function(t,e,n){return t.text=t.text.slice(0,e)+"$$"+t.text.slice(e,n)+"$$"+t.text.slice(n),{sel:{start:e+2,end:n+2}}}},frac:{html:"$$\\frac{a}{b}$$",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\\frac{"+t.text.slice(e,n)+"}{}"+t.text.slice(n),{sel:{start:e+6,end:n+6}}}},square:{html:"$$x^2$$",func:function(t,e,n){return t.text=t.text.slice(0,e)+t.text.slice(e,n)+"^{2}"+t.text.slice(n),{sel:{start:n+2,end:n+3}}}},limit:{html:"$$\\lim_{x\\rightarrow \\infty}$$",func:function(t,e,n){return t.text=t.text.slice(0,e)+"\\lim_{x\\rightarrow \\infty}"+t.text.slice(e,n)+t.text.slice(n),{sel:{start:e+6,end:n+25}}}}},app=new Vue({el:"#app",data:{text:"# Type your notes here",md:new markdownTreatment,tb:toolbox},watch:{text:function(t){Vue.nextTick(function(){refreshMathJax()})}},mounted:function(){document.getElementsByTagName("textarea")[0].focus()},computed:{textTeX:function(){return this.md.makeHtml(this.text)}},methods:{tool:function(t){const e=document.getElementsByTagName("textarea")[0];let n=e.selectionStart,s=e.selectionEnd;let i;t&&(i=this.tb[t].func(this,n,s)),i&&i.sel&&(n=i.sel.start,s=i.sel.end),i&&i.noFocus||e.focus(),setTimeout(()=>{e.setSelectionRange(n,s)},0)}}});Split(["#a","#b"],{sizes:[40,60],gutterSize:8,cursor:"col-resize",minSize:[100,200],snapOffset:0}),Split(["#c","#d"],{direction:"vertical",sizes:[25,75],gutterSize:8,cursor:"row-resize",minSize:[1,100],snapOffset:0}),document.getElementById("md-file").addEventListener("change",t=>{fileReader.readAsText(t.target.files[0])});const fileReader=new FileReader;fileReader.onload=(()=>{fileContent=fileReader.result,app.$set(app.$data,"text",fileContent)}),window.onbeforeunload=function(){return"Sure?"};